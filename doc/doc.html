<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0064)https://www.fit.vut.cz/study/course/IIS/private/projekt/doc.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-2">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Projekt IIS</title>
  <style type="text/css">
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      box-sizing: border-box;
      line-height: 1.6;
      max-width: 80%;
      margin: 0 auto;
    }
    p, dl, ul, table {
      margin: 0 auto;
      word-wrap: break-word;
    }
    table {
      width: 40%;
      border-collapse: collapse;
      overflow-x: auto;
    }
    td, th {
      border: 1px solid black;
      padding: 0.3em 0.5em;
      text-align: left;
      word-wrap: break-word;
      max-width: 200px;
    }
    img {
      max-width: 60%;
      height: auto;
      display: block;
      margin: 0 auto;
    }
    code {
      color:red;
      font-size: large;
    }
  </style>
</head>
<body data-new-gr-c-s-check-loaded="14.1089.0" data-gr-ext-installed="">

<!-- Zkontrolujte prosím nastavení kódování v hlavièce dokumentu
     podle pou¾itého editoru -->

<h1>Zvíøecí útulek</h1> <!-- Nahradte názvem svého zadání -->

<dl>
  <h3>Autoøi</h3>
  <dd>Adam Valík
    <a href="mailto:xvalik05@stud.fit.vutbr.cz">xvalik05@stud.fit.vutbr.cz</a> -
    Majitel informaèních systémù
  </dd>
  <dd>Samuel Hejníèek
    <a href="mailto:xhejni00@stud.fit.vutbr.cz">xhejni00@stud.fit.vutbr.cz</a> -
    Sietockar
  </dd>
  <dd>Marek Effenberger
    <a href="mailto:xeffen00@stud.fit.vutbr.cz">xeffen00@stud.fit.vutbr.cz</a> -
    Vlastník frontendu
  </dd>
  <h3>URL aplikace</h3>

  <dd >URL aplikace je dostupná na adrese:</dd>
  <dd><a href="https:/iis-frontend.onrender.com/">https:/iis-frontend.onrender.com/</a></dd>
</dl>


<h2>U¾ivatelé systému pro testování</h2>

<p>Pro testování mù¾ete pou¾ít následující u¾ivatele:</p>
<table>
  <thead>
  <tr>
    <th>Login</th>
    <th>Heslo</th>
    <th>Role</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>admin@admin.com</td>
    <td>admin123</td>
    <td>Administrátor</td>
  </tr>
  <tr>
    <td>caregiver@example.com</td>
    <td>caregiver123</td>
    <td>Peèovatel</td>
  </tr>
  <tr>
    <td>vet@example.com</td>
    <td>vet123</td>
    <td>Veterináø</td>
  </tr>
  <tr>
    <td>volunteer@example.com</td>
    <td>volunteer123</td>
    <td>Ovìøený dobrovolník</td>
  </tr>
  <tr>
    <td>unverified@example.com</td>
    <td>unverified123</td>
    <td>Neovìøený dobrovolník</td>
  </tr>
  </tbody>
</table>

<h3>Video</h3>

<p>Pøilo¾te odkaz na komentované video demostrující pou¾ití informaèního systému. Zamìøte se na pøípady u¾ití definované zadáním (napø. registrace u¾ivatele, správa u¾ivatelù a èinnosti jednotlivých rolí). Video nahrajte napøíklad na VUT Google Drive, kde ho bude mo¾né pøímo spustit z odkazu.</p>

<h2>Implementace</h2>

<p>Informaèní systém 'Zvíøecí útulek' je implementován pomocí kombinace frameworkù umo¾òujících modulární architekturu.
  Interaktivní u¾ivatelské elementy na¹eho systému jsou napsány v HTML obohaceného o stylování za pou¾ití frameworku Tailwind CSS.
  Tyto elementy obsluhuje kontrolerová vrstva postavena ve frameworku Vue.js. Vue.js pak pomocí REST API vysílá po¾adavky, které jsou zpracovány webovým rámcem FastAPI v jazyce Python. Kombinace Vue.js a Python tak tvoøí aplikaèní vrstvu na¹eho systému.
  Databáze systému je postavena na PostgreSQL, pøièem¾ objektovì-relaèní model je abstrahován pomocí knihovny SQLAlchemy. Vyu¾ití této knihovny pøípadnì umo¾òuje snadnou migraci na jiný databázový systém, napø. MySQL.
</p>
<br>
<p>
  Systém je tvoøen nìkolika stránkami doplnìnými o prvky a modulární komponenty, které jsou u¾ivatelùm zpøístupnìny podle jejich oprávnìní.
</p>
<br>
<p>
  U¾ivatel je nejprve pøivítán hlavní obrazovkou. Na základì pøedchozí bì¾ící relace je pøímo pøihlá¹en a mù¾e pokraèovat v operacích na základì vlastních práv, pøípadnì je systémem rozpoznán jako neregistrovaný u¾ivatel.
</p>
<br>
<p>
  Nehledì na práva si pak tento u¾ivatel mù¾e zobrazit ve¹kerá zvíøata, která jsou aktuálnì v útulku, pomocí prokliku na "View All Animals". View All Animals po¹le po¾adavek na zobrazení v¹ech zvíøat aktuálnì se nacházejících v útulku. U¾ivatel pak dostane základní výèet informací o zvíøeti a mù¾e pøi kliknutí na okénko zvíøete si mù¾e zobrazit jeho detailní popis.
</p>
<br>
<p>
  Popis zvíøete je stejný v¹em u¾ivatelùm systému. Co se ale mìní na základì práv, je mno¾ina operací reprezentovaných interaktivními tlaèítky, které nad zvíøetem mù¾ou provést. U¾ivatel bez vytvoøeného úètu dostane upozornìní na mo¾nost venèení pøi tvorbì nového úètu / pøihlá¹ení se. Pøihlá¹ený dobrovolník má mo¾nost si zobrazit rozvrh zvíøete a pøípadnì si vytvoøit rezervaci venèení. Peèovatel si pak mù¾e zobrazit rozvrh zvíøete a pøidat mu temríny venèení, podat ¾ádost na veterináøe na vy¹etøení zvíøete, editovat informace o zvíøeti nebo si zobrazit jeho zdravotní záznamy. Veterináø pak má mo¾nost dostat se ke zdravotním kartám zvíøete nebo si zobrazit v¹echny zdravotní záznamy. Administrátor dostává kombinaci práv peèovatele a veterináøe.
</p>
<br>
<p>
  Dal¹í mo¾ností, která se nabízí ji¾ z hlavní nabídky je pøihlá¹ení u¾ivatele. U¾ivateli se zobrazí formuláø, který, kdy¾ je opatøen údaji korelujícími se záznamem u¾ivatele v databázi, provede pøihlá¹ení u¾ivatele do systému. U¾ivatel se z této nabídky té¾ mù¾e dostat k registraènímu formuláøi, pokud si tvoøí nový úèet. Oba formuláøe jsou opatøeny kontrolami správného formátu vstupu. Heslo je pøi ukládání do databáze podrobeno hashování, co¾ znamená, ¾e do databáze se ukládá pouze hash hesla (vypoèítaný pomocí knihovny bcrypt), nikoli heslo samotné. Samotný hash má 60 znakù a pøi jeho tvorbì je navíc vyu¾ito "soli", co¾ je dal¹í mechanismus zvy¹ující bezpeènost hashe (napø. dva u¾ivatelé se stejným heslem nebudou mít stejný hash).
</p>
<br>
<p>
  Peèovatel eviduje novì pøijaté zvíøata do útulku v sekci 'Add Animal'. Zde musí vyplnit jméno a druh zvíøete, dále mù¾e pøidat informace jako jsou rasa, velikost, rok narození, pøidat popis a zároveò i fotku zvíøete.
</p>
<br>
<p>
  Rozvrh zvíøete je realizovaný pomocí týdenního zobrazení hodin s interaktivními okénky, je¾ na základì rùzného zbarvení (popsaného v legendì pod samotným rozvrhem) u¾ivatele informují o èasové obsazenosti zvíøete. Ovìøený u¾ivatel má mo¾nost si podat ¾ádost o rezervaci na okénka s volnými termíny, zobrazit si vlastní rezervace a pøípadnì provést jejich zru¹ení. Peèovatel mù¾e vytvoøit nové volné termíny pro venèení, zobrazit si rezervace a pøes proklik nahlédnout na detail u¾ivatele, který rezervaci podal. Pøedev¹ím v¹ak provádí potvrzení nebo zru¹ení dané rezervace. Informace o nadcházejících i probìhlých rezervacích pro ve¹kerá zvíøata si u¾ivatel mù¾e zobrazit na stránce 'My Reservations' a peèovatel na stránce 'Reservations'. V této nabídce je peèovateli umo¾nìno si do systému poznamenat zda bylo zvíøe vydané dobrovolníkovi a zda bylo následnì navráceno.
</p>
<br>
<p>
  Podobnì jako nabídka s detaily zvíøete, tak také u¾ivatelé disponují oknem, které shrnuje jejich údaje. Dále má ka¾dý u¾ivatel pøístup do okna 'My Profile', kde si mù¾e doplnit telefonní èíslo, nebo zmìnit heslo. Peèovatele a veterináøe mù¾e do systému pøidávat pouze administrátor. Peèovatelé pak mohou pøidávat dobrovolníky, které zároveò ovìøují a udìlují jim tak práva vytváøet rezervace venèení.
</p>
<br>
<p>
  Pro zvíøata mohou peèovatelé vytvoøit po¾adavky na kontrolu èi o¹etøení veterináøem. Veterináøùm se pak zobrazí v prokliku pøes akci 'Examination requests' tento po¾adavek. Jakýkoli veterináø pak mù¾e na tento po¾adavek zareagovat pøidáním zdravotního záznamu zvíøeti do systému s popisem prohlídky, uvedením výsledku vá¾ení a pøípadným popisem vakcinace.
</p>
<br>
<p>
  V pøípadì odstranìní zvíøete nebo u¾ivatele ze systému se provede tzv. soft-delete. U polo¾ek si pak ukládáme status smazání, aèkoli k fyzickému odstranìní záznamu z databáze nedojde. Díky tomu si zamìstnanci útulku i dobrovolníci mohou stále zobrazovat historii ve¹kerých interakcí.
</p>
<br>
<p>
  Informaèní systém nepou¾ívá stavová sezení, tedy pøi interakci mezi klientem a serverem si server ¾ádný token neukládá a ani se neposílá v rámci Cookies. Místo sezení je pou¾it  mechanismus JWT tokenù, který je bezstavový a token je reprezentován jako JSON objekt. Tento token je u¾ivateli vytvoøen pøi jeho pøihlá¹ení do systému a obsahuje infomace jako je jeho identifikaèní èíslo, role a platnost tokenu. Token je ulo¾en v jeho prohlí¾eèi (localStorage).
  Následnì pøi ka¾dém dotazu na server klient posílá tento token v hlavièce HTTP protokolu (Authorization: Bearer TOKEN), slovo bearer znaèí, ¾e server pou¾ije klientùv token k ovìøení. Server zkontroluje, zdali je token vytvoøený serverem (porovná podepsanou èást tokenu se svým klíèem) a pøípadnì jeho platnost (token expiruje po 10 minutách neèinnosti). Pøi po¾adavku mù¾e také dojít k ovìøení role u¾ivatele, pokud je to zapotøebí pro provedení dané akce.
  Po odhlá¹ení klienta ze systému je token z prohlí¾eèe smazán a u¾ivatel je pøesmìrován na úvodní stránku.
</p>

<h3>Struktura projektu</h3>
<p>Výèet use casù a odpovídající Vue soubory:</p>
<ul>
  <li>
    <strong>Registrace u¾ivatele:</strong>
    <ul>
      <li>SignUpView.vue</li>
    </ul>
  </li>
  <li>
    <strong>Pøihlá¹ení u¾ivatele:</strong>
    <ul>
      <li>LoginView.vue</li>
    </ul>
  </li>
  <li>
    <strong>Správa u¾ivatelù/dobrovolníkù:</strong>
    <ul>
      <li>ListUsersView.vue</li>
    </ul>
  </li>
  <li>
    <strong>Zobrazení profilu u¾ivatele:</strong>
    <ul>
      <li>ProfileDetail.vue</li>
    </ul>
  </li>
  <li>
    <strong>Zobrazení detailù zvíøete:</strong>
    <ul>
      <li>AnimalDetail.vue</li>
    </ul>
  </li>
  <li>
    <strong>Pøídání zvíøete:</strong>
    <ul>
      <li>AddAnimalView.vue</li>
    </ul>
  </li>
  <li>
    <strong>Zobrazení seznamu zvíøat:</strong>
    <ul>
      <li>AnimalsView.vue</li>
    </ul>
  </li>
  <li>
    <strong>Rezervace:</strong>
    <ul>
      <li>ReservationView.vue</li>
    </ul>
  </li>
  <li>
    <strong>Po¾adavky na vy¹etøení:</strong>
    <ul>
      <li>RequestsView.vue</li>
    </ul>
  </li>
  <li>
    <strong>Zdravotní záznamy:</strong>
    <ul>
      <li>MedicalRecordsList.vue</li>
    </ul>
  </li>
  <li>
    <strong>Rozvrh venèení zvíøete:</strong>
    <ul>
      <li>SchedulerView.vue</li>
    </ul>
  </li>
</ul>

<h3>Databáze</h3>

<p>Návrh databáze (ERD):</p>
<img src="IIS_ERD.png" alt="Návrh databáze (ERD)">

<p>Schéma relaèní databáze (tabulky v databázi):</p>
<img src="IIS_RDB.png" alt="Schéma relaèní databáze" style="max-width: 90%;">

<h2>Instalace</h2>

<p>
  Informaèní systém jsme nasadili na plaformu Render.com, co¾ je poskytovatel cloudového hostování, který pro omezené pou¾ití bezplatnì poskytuje nasazení aplikace v cloudu.
  Podporuje rùzné technologie, co¾ nám umo¾nilo zde nasadit v¹echny èásti na¹eho informaèního systému.
  Frontend i backend jsou zde nasazeny jako samostatné slu¾by, tøetí slu¾bou pak je databáze PostgreSQL, která bude dostupná do 19. prosince 2024.
</p>
<br>

<img src="render.png" alt="Render" >
<br>
<p>
  Pro úèely vývoje a lokálního pou¾ití byl nasazen nástroj Docker Compose, který umo¾nil efektivní správu více kontejnerù v rámci jednoho konzistentního prostøedí.
  Tento nástroj nám usnadnil integraci slu¾eb, vèetnì jednoduchého nasazení PostgreSQL databáze prostøednictvím Docker image.
</p>
<br>
<p>
  Ke spu¹tìní aplikace je tøeba mít nainstalovaný Docker Desktop, který zahrnuje pøíkaz <code>docker compose</code> (pøípadnì <code>docker-compose</code>).
  V koøenovém adresáøi projektu staèí spustit pøíkaz <br>
  <code>docker compose up --build</code><br>Ten stáhne potøebné závislosti, vytvoøí a spustí kontejnery s aplikací.
  Zároveò se vytvoøí databázové schéma. Pro naplnìní databáze ukázkovými daty je tøeba spustit skript <br><code>docker exec -it backend python3 /app/example_data.py</code><br>
  Dojde k vytvoøení demonstraèních u¾ivatelských úètù, ale pøedev¹ím se vytvoøí úèet admina (pøihla¹ovací údaje uvedeny vý¹e).<br>
  Na adrese <code>localhost:8080</code> pak bude dostupné u¾ivatelské rozhraní.
</p>

<h2>Známé problémy</h2>
<p>XDD VTIPALCI SI MYSLI ZE MAME NEJAKE CHYBY.</p>

